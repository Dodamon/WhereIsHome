<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.happyhouse.board.mapper.BoardMapper">

	<select id="selectAll"  resultType="board">
		SELECT code, title, content, writer, reg_datetime, user_code 
		FROM board 
	<!-- 	ORDER BY originNo DESC, groupOrd ASC -->
	</select>
	
	<select id="getSido" resultType="dongcode">
		SELECT DISTINCT sidoName
		FROM dongcode
	</select>
  
  
	<insert id="write" parameterType="board" >
	 		insert into board(writer, title, content, groupLayer, file_name) values(#{writer}, #{title}, #{content}, 0, #{file_name})
	</insert>
		
	<select id="selectOne"  parameterType="string"  resultType="board">
	    SELECT code,originNo,groupOrd, groupLayer, concat(LPAD('>' ,groupLayer * 4,'-' ) ,title) title, content,writer, reg_datetime, file_name
	    FROM board 
	    WHERE code = #{code}
	</select>
  
	
	<update id="modify" parameterType="string">
		update board
		set title=#{title}, content=#{content}
		where code=#{code}
	</update>
	
	<delete id="delete" parameterType="string">
		delete
		from board
		where code=#{code}
	</delete>
		
</mapper>